import{a as c,j as e,F as l,w as u,x as m,u as x,C as j,B as o,f as g,g as C,h as p,i as v,k as N,r as f,m as y,y as I,H as S,z as b}from"./index-Baxtfel7.js";const T="_pizzaCard_ti28m_1",w="_pizzaCard__image_ti28m_14",P="_pizzaCard__details_ti28m_26",D="_pizzaTitle_ti28m_35",B="_pizzaDescription_ti28m_41",R="_sizeSelector_ti28m_47",k="_crustSelector_ti28m_48",A="_active_ti28m_64",E="_ingredients_ti28m_70",H="_ingredient_ti28m_70",L="_addToCart_ti28m_83",i={pizzaCard:T,pizzaCard__image:w,pizzaCard__details:P,pizzaTitle:D,pizzaDescription:B,sizeSelector:R,crustSelector:k,active:A,ingredients:E,ingredient:H,addToCart:L},F=()=>{const{product:s}=c(t=>t.product);return e.jsx("img",{src:s.image?s.image:s.iiko_image,width:"100%",style:{borderRadius:"30px"},alt:"Пепперони фреш",className:i.pizzaImage})},M=()=>{var t;const{product:s}=c(a=>a.product);return e.jsx("div",{className:i.crustSelector,children:e.jsxs(l,{gap:16,children:[e.jsx(u,{value:s.average_rating}),e.jsxs("p",{children:["Количество отзывов ",(t=s==null?void 0:s.product_reviews)==null?void 0:t.length]})]})})},q=()=>{const{product:s}=c(t=>t.product);return e.jsxs("div",{className:i.ingredients,children:[e.jsx("h3",{children:"Пишевая ценность"}),e.jsxs("div",{className:i.ingredientsList,children:[e.jsxs("div",{className:i.ingredient,children:[e.jsx("span",{children:"Жиры"}),e.jsx("span",{children:s.fats})]}),e.jsxs("div",{className:i.ingredient,children:[e.jsx("span",{children:"Белки"}),e.jsx("span",{children:s.proteins})]}),e.jsxs("div",{className:i.ingredient,children:[e.jsx("span",{children:"Углеводы"}),e.jsx("span",{children:s.carbs})]}),e.jsxs("div",{className:i.ingredient,children:[e.jsx("span",{children:"Ккал"}),e.jsx("span",{children:s.energy})]}),e.jsxs("div",{className:i.ingredient,children:[e.jsx("span",{children:"Граммы"}),e.jsx("span",{children:s.portionWeightGrams})]})]})]})},G=({price:s})=>{const{id:t}=m(),a=x();function n(){const r={quantity:1,total:+s,cart:Number(localStorage.getItem("cart_id")),product:Number(t)};a(C({data:r})).then(()=>p.success(`Товар ${name} успешно добвлен `))}const{data:_}=c(r=>r.cart),d=_.items.find(r=>r.product.id===Number(t));async function z(r){try{await v.deleteCartItemById(r).then(()=>{a(N(r)),p.success("товар успешно удален из корзины")})}catch(h){console.log(h)}}return e.jsx(l,{gap:5,justify:"space-between",align:"center",children:d?e.jsxs(l,{children:[e.jsx(j,{record:d}),e.jsx(o,{onClick:()=>z(d.id),danger:!0,style:{width:"32px",display:"flex",alignItems:"center",justifyContent:"center",marginLeft:"5px"},icon:e.jsx(g,{style:{color:"red"}})})]}):e.jsx(o,{className:"select-button",onClick:n,type:"primary",children:"Добавить в корзину"})})},W=()=>{const{product:s}=c(t=>t.product);return e.jsxs("div",{className:i.pizzaCard,children:[e.jsx("div",{className:i.pizzaCard__image,children:e.jsx(F,{})}),e.jsxs("div",{className:i.pizzaCard__details,children:[e.jsx("h1",{className:i.pizzaTitle,children:s.title}),e.jsx("p",{className:i.pizzaDescription,children:s.description}),e.jsx(M,{}),e.jsx(q,{}),e.jsx(G,{price:s.price})]})]})},J=()=>{const s=x(),{id:t}=m(),{product:a}=c(n=>n.product);return f.useEffect(()=>{s(y({filters:""})),s(I({id:Number(t)}))},[t]),e.jsxs("div",{className:"container",children:[e.jsx(S,{children:e.jsxs("title",{children:["Mnogosushi | ",a!=null&&a.title?a.title:"Детальный просмотр"]})}),e.jsx(W,{}),e.jsx(b,{})]})};export{J as default};
